(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{10:function(e,t,a){e.exports={ImageGalleryItem:"ImageGalleryItem_ImageGalleryItem__3CvRl",ImageGalleryItem__image:"ImageGalleryItem_ImageGalleryItem__image__3Jj9u"}},11:function(e,t,a){e.exports={Overlay:"Modal_Overlay__2AxMb",Modal:"Modal_Modal__2WBTT"}},14:function(e,t,a){e.exports={ImageGallery:"ImageGallery_ImageGallery__DncjJ"}},15:function(e,t,a){e.exports={Button:"Button_Button__3R1xi"}},16:function(e,t,a){e.exports={Container:"LoaderContainer_Container__2fPYl"}},22:function(e,t,a){},46:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(4),o=a.n(c),l=(a(21),a(22),a(12)),s=a(3),u=a(5),i=a(6),b=a.n(i),m=a(1),j=function(e){var t=e.onSubmit,a=Object(r.useState)(""),n=Object(s.a)(a,2),c=n[0],o=n[1];return Object(m.jsx)("header",{className:b.a.Searchbar,children:Object(m.jsxs)("form",{className:b.a.SearchForm,onSubmit:function(e){if(e.preventDefault(),""===c)return u.b.info("Enter query");t(c),o("")},children:[Object(m.jsx)("button",{type:"submit",className:b.a.SearchForm__button,children:Object(m.jsx)("span",{className:b.a.SearchForm__buttonLabel,children:"Search"})}),Object(m.jsx)("input",{value:c,className:b.a.SearchForm__input,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",onChange:function(e){return o(e.currentTarget.value)}})]})})},h=a(13),d=a.n(h),_=a(2),f=a.n(_),O=a(10),g=a.n(O),p=function(e){var t=e.webUrl,a=e.largeUrl,r=e.desc,n=e.openModal;return Object(m.jsx)("li",{className:g.a.ImageGalleryItem,"data-url":a,"data-desc":r,onClick:n,children:Object(m.jsx)("img",{src:t,alt:r,className:g.a.ImageGalleryItem__image})})},x=a(14),S=a.n(x);p.propTypes={images:f.a.array,openModal:f.a.func.isRequired};var y=function(e){var t=e.images,a=e.openModal;return Object(m.jsx)("ul",{className:S.a.ImageGallery,children:t.map((function(e){var t=e.id,r=e.webformatURL,n=e.largeImageURL,c=e.tags;return Object(m.jsx)(p,{webUrl:r,largeUrl:n,desc:c,openModal:a},t)}))})},v=a(15),I=a.n(v),w=function(e){var t=e.text,a=e.onClick;return Object(m.jsx)("button",{className:I.a.Button,type:"button",onClick:a,children:t})},F=a(16),M=a.n(F),k=function(e){var t=e.children;return Object(m.jsx)("div",{className:M.a.Container,children:t})},C=a(11),B=a.n(C),G=document.querySelector("#modal-root"),N=function(e){var t=e.url,a=e.desc,n=e.closeModal,o=function(e){"Escape"===e.code&&n()};return Object(r.useEffect)((function(){return window.addEventListener("keydown",o),function(){window.removeEventListener("keydown",o)}})),Object(c.createPortal)(Object(m.jsx)("div",{className:B.a.Overlay,onClick:function(e){e.currentTarget===e.target&&n()},children:Object(m.jsx)("div",{className:B.a.Modal,children:Object(m.jsx)("img",{src:t,alt:a})})}),G)},E="https://pixabay.com/api/",L="21680685-e17dbc926fcd99c5b67998b00",T={fetchImages:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return fetch("".concat(E,"?q=").concat(e,"&page=").concat(t,"&key=").concat(L,"&image_type=photo&orientation=horizontal&per_page=12"))}},q=(a(44),a(45),function(){var e=Object(r.useState)(""),t=Object(s.a)(e,2),a=t[0],n=t[1],c=Object(r.useState)(!1),o=Object(s.a)(c,2),i=o[0],b=o[1],h=Object(r.useState)([]),_=Object(s.a)(h,2),f=_[0],O=_[1],g=Object(r.useState)(1),p=Object(s.a)(g,2),x=p[0],S=p[1],v=Object(r.useState)(!1),I=Object(s.a)(v,2),F=I[0],M=I[1],C=Object(r.useState)(null),B=Object(s.a)(C,2),G=B[0],E=B[1],L=Object(r.useState)(!1),q=Object(s.a)(L,2),J=q[0],R=q[1],U=Object(r.useState)({url:"",desc:""}),D=Object(s.a)(U,2),P=D[0],W=D[1],z=P.url,A=P.desc,H=Object(r.useRef)();return Object(r.useEffect)((function(){if(""!==a){var e=H.current;b(!0),M(!1),T.fetchImages(a,x).then((function(e){return e.json()})).then((function(t){var r=t.hits;if(0===r.length)return a!==e?u.b.info("Enter another query"):u.b.info("There ara no more images, enter new query");12===r.length?M(!0):M(!1),O((function(e){return[].concat(Object(l.a)(e),Object(l.a)(r))})),1!==x&&window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"}),H.current=a})).catch((function(e){return E(e)})).finally((function(){return b(!1)}))}}),[a,x]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(j,{onSubmit:function(e){n(e),S(1),O([])}}),G&&Object(m.jsx)("p",{children:G.message}),Object(m.jsx)(y,{images:f,openModal:function(e){var t=e.currentTarget.dataset,a=t.url,r=t.desc;R(!0),W({url:a,desc:r})}}),i&&Object(m.jsx)(k,{children:Object(m.jsx)(d.a,{type:"ThreeDots",color:"#00BFFF",height:80,width:80})}),F&&!i&&Object(m.jsx)(w,{text:"Load more",onClick:function(e){S((function(e){return e+1}))}}),J&&Object(m.jsx)(N,{url:z,desc:A,closeModal:function(){R(!1)}}),Object(m.jsx)(u.a,{autoClose:3e3})]})});o.a.render(Object(m.jsx)(n.a.StrictMode,{children:Object(m.jsx)(q,{})}),document.getElementById("root"))},6:function(e,t,a){e.exports={Searchbar:"SearchBar_Searchbar__19WMJ",SearchForm:"SearchBar_SearchForm__1k1JW",SearchForm__button:"SearchBar_SearchForm__button__3d0oz",SearchForm__buttonLabel:"SearchBar_SearchForm__buttonLabel__2jhuA",SearchForm__input:"SearchBar_SearchForm__input__30P3e"}}},[[46,1,2]]]);
//# sourceMappingURL=main.03a9cb40.chunk.js.map